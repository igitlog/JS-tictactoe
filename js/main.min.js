"use strict";window.addEventListener("load",app);let gameBoard=["","","","","","","","",""],turn=Math.floor(2*Math.random())+0,winner=!1,moves=0;const player=e=>({name:e=e});let playerX=player(""),playerY=player("");function app(){document.querySelector(".input-field").focus();document.getElementById("player-form").addEventListener("submit",addPlayers),document.querySelector(".rename-btn").addEventListener("click",renamePlayers),document.querySelector(".replay-btn").addEventListener("click",resetBoard)}function addPlayers(e){if(e.preventDefault(),""===this.player1.value||""===this.player2.value)return void alert("You need to enter the names of the players");const r=document.querySelector(".enter-players"),n=document.querySelector(".board__main");r.classList.add("hide-container"),n.classList.remove("hide-container"),playerX.name=this.player1.value,playerY.name=this.player2.value,buildBoard()}function currentPlayer(){return turn%2==0?"X":"O"}function countionMoves(){return moves+=1}function onResize(){let e=document.querySelectorAll(".board__cell"),r=e[0].offsetWidth-40;e.forEach(e=>{e.style.height=`${r}px`})}function buildBoard(){document.querySelector(".reset").classList.remove("reset--hidden"),document.querySelector(".rename").classList.remove("rename--hidden"),onResize(),addCellClickListener(),changeBoardHeaderNames()}function makeMove(e){let r=parseInt(e.currentTarget.firstElementChild.dataset.id),n=document.querySelector(`[data-id='${r}']`);""===n.innerHTML?("X"===currentPlayer()?(n.textContent=currentPlayer(),gameBoard[r]="X"):(n.textContent=currentPlayer(),gameBoard[r]="O"),isWinner(),turn++,countionMoves(),changeBoardHeaderNames()):alert("This cell is already taken.")}function checkIfTie(){8===moves&&alert("game over a tie")}function isWinner(){return[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach(e=>{let r=e[0],n=e[1],t=e[2];if(gameBoard[r]===currentPlayer()&&gameBoard[n]===currentPlayer()&&gameBoard[t]===currentPlayer()){const e=document.querySelectorAll(".board__cell");document.querySelector(`[data-id='${r}']`),document.querySelector(`[data-id='${n}']`),document.querySelector(`[data-id='${t}']`);e.forEach(e=>{let a=e.firstElementChild.dataset.id;+a!==r&&+a!==n&&+a!==t||e.classList.add("board__cell--winner")});let a=document.querySelector(".board___player-turn");return"X"===currentPlayer()?(a.innerHTML=`\n          <div class="congratulations">Congratulations ${playerX.name}</div>\n          <div class="u-r-winner">You are our winner!</div>\n        `,winner=!0,removeCellClickListener(),!0):(a.innerHTML=`\n          <div class="congratulations">Congratulations ${playerY.name}</div>\n          <div class="u-r-winner">You are our winner!</div>\n        `,winner=!0,removeCellClickListener(),!0)}}),winner||checkIfTie(),!1}function changeBoardHeaderNames(){if(!winner){let e=document.querySelector(".board___player-turn");9===moves?e.innerHTML='\n    <span class="name--style">Click "CLEAR BOARD"</span>\n    <div class="u-r-winner"></div>\n  ':"X"===currentPlayer()?e.innerHTML=`\n          <span class="name--style">${playerX.name}</span>, you are up!\n          <div class="u-r-winner"></div>\n        `:e.innerHTML=`\n          <span class="name--style">${playerY.name}</span>, you are up.\n          <div class="u-r-winner"></div>\n        `}}function renamePlayers(){const e=document.querySelector(".enter-players"),r=document.querySelector(".board__main");let n=document.querySelector(".reset"),t=document.querySelector(".rename");e.classList.remove("hide-container"),r.classList.add("hide-container"),n.classList.add("reset--hidden"),t.classList.add("rename--hidden")}function resetBoard(){gameBoard=["","","","","","","","",""],document.querySelectorAll(".letter").forEach(e=>{e.textContent="",e.parentElement.classList.remove("board__cell--winner")}),turn=Math.floor(2*Math.random())+0,moves=0,winner=!1,document.querySelector(".board___player-turn").innerHTML=`\n    <span class="name--style">${playerX.name}</span>, you are up!\n    <div class="u-r-winner"></div>\n  `,addCellClickListener()}function addCellClickListener(){document.querySelectorAll(".board__cell").forEach(e=>{e.addEventListener("click",makeMove)})}function removeCellClickListener(){document.querySelectorAll(".board__cell").forEach(e=>{e.removeEventListener("click",makeMove)})}window.addEventListener("resize",onResize);